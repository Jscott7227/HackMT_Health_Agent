<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Premium Health App ‚Äì Onboarding</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,500&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="styles.css" />
</head>
<body>

<!-- ============================================================
     BACKGROUND (reuses existing grain + orb layers)
     ============================================================ -->
<div class="background-layers">
    <div class="grain"></div>
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="gradient-orb orb-3"></div>
</div>

<!-- ============================================================
     ONBOARDING SHELL
     ============================================================ -->
<div class="onboarding-shell">
    <div class="onboarding-card">

        <!-- thin progress strip across the very top -->
        <div class="ob-progress-strip">
            <div class="ob-progress-fill" id="progressFill"></div>
        </div>

        <!-- ================================================
             SCREEN 1 ‚Äì Welcome
             ================================================ -->
        <div class="ob-screen active" id="screen-1">
            <div class="ob-welcome-icon">üåø</div>
            <h1 class="ob-headline">Let's personalize<br>your health plan</h1>
            <p class="ob-subtext">Answer a few quick questions so we can tailor guidance specifically for you. This takes about 2 minutes.</p>
            <button class="ob-cta" onclick="goTo(2)">Get started</button>
            <p class="ob-microcopy">You can update any answer later.</p>
        </div>

        <!-- ================================================
             SCREEN 2 ‚Äì Primary Goal
             ================================================ -->
        <div class="ob-screen" id="screen-2">
            <p class="ob-step-label">Step 1 of 9</p>
            <h1 class="ob-headline">What's your main<br>goal right now?</h1>
            <div class="ob-option-list" id="goalList">
                <button class="ob-option-card" data-group="goal" data-value="lose-fat" onclick="selectOption(this)">
                    <span class="ob-option-icon">üî•</span>
                    <span class="ob-option-label">Lose body fat</span>
                    <span class="ob-option-check"></span>
                </button>
                <button class="ob-option-card" data-group="goal" data-value="build-muscle" onclick="selectOption(this)">
                    <span class="ob-option-icon">üí™</span>
                    <span class="ob-option-label">Build muscle</span>
                    <span class="ob-option-check"></span>
                </button>
                <button class="ob-option-card" data-group="goal" data-value="endurance" onclick="selectOption(this)">
                    <span class="ob-option-icon">üèÉ</span>
                    <span class="ob-option-label">Improve endurance</span>
                    <span class="ob-option-check"></span>
                </button>
                <button class="ob-option-card" data-group="goal" data-value="feel-healthier" onclick="selectOption(this)">
                    <span class="ob-option-icon">üå±</span>
                    <span class="ob-option-label">Feel healthier overall</span>
                    <span class="ob-option-check"></span>
                </button>
                <button class="ob-option-card" data-group="goal" data-value="not-sure" onclick="selectOption(this)">
                    <span class="ob-option-icon">ü§î</span>
                    <span class="ob-option-label">Not sure yet</span>
                    <span class="ob-option-check"></span>
                </button>
            </div>
            <p class="ob-microcopy">We'll adapt your plan based on this.</p>
            <button class="ob-cta" id="cta-2" onclick="goTo(3)" disabled>Continue</button>
        </div>

        <!-- ================================================
             SCREEN 3 ‚Äì Experience Level
             ================================================ -->
        <div class="ob-screen" id="screen-3">
            <p class="ob-step-label">Step 2 of 9</p>
            <h1 class="ob-headline">How would you describe<br>your fitness experience?</h1>
            <div class="ob-option-list" id="expList">
                <button class="ob-option-card" data-group="experience" data-value="beginner" onclick="selectOption(this)">
                    <span class="ob-option-icon">üåÖ</span>
                    <span class="ob-option-label">
                        Beginner
                        <span class="ob-option-helper">Just getting started or returning after a long break</span>
                    </span>
                    <span class="ob-option-check"></span>
                </button>
                <button class="ob-option-card" data-group="experience" data-value="intermediate" onclick="selectOption(this)">
                    <span class="ob-option-icon">‚ö°</span>
                    <span class="ob-option-label">
                        Intermediate
                        <span class="ob-option-helper">Exercise regularly and know the basics</span>
                    </span>
                    <span class="ob-option-check"></span>
                </button>
                <button class="ob-option-card" data-group="experience" data-value="advanced" onclick="selectOption(this)">
                    <span class="ob-option-icon">üèÜ</span>
                    <span class="ob-option-label">
                        Advanced
                        <span class="ob-option-helper">Structured training experience</span>
                    </span>
                    <span class="ob-option-check"></span>
                </button>
            </div>
            <button class="ob-cta" id="cta-3" onclick="goTo(4)" disabled>Continue</button>
        </div>

        <!-- ================================================
             SCREEN 4 ‚Äì Height
             ================================================ -->
        <div class="ob-screen" id="screen-4">
            <p class="ob-step-label">Step 3 of 9</p>
            <h1 class="ob-headline">What's your height?</h1>
            <div class="ob-metric-row">
                <div class="ob-unit-toggle" id="heightUnitToggle">
                    <button class="ob-unit-btn active" data-unit="imperial" onclick="switchUnit('height','imperial',this)">ft & in</button>
                    <button class="ob-unit-btn" data-unit="metric" onclick="switchUnit('height','metric',this)">cm</button>
                </div>
            </div>
            <!-- metric view -->
            <div id="heightMetric" class="ob-metric-row">
                <input type="number" class="ob-metric-input" id="heightCm" placeholder="170" min="60" max="280" oninput="validateMetric()" />
                <span class="ob-imperial-label">cm</span>
            </div>
            <!-- imperial view -->
            <div id="heightImperial" class="ob-imperial-row" style="display:flex;">
                <input type="number" class="ob-metric-input" id="heightFt" placeholder="5" min="1" max="8" oninput="validateMetric()" />
                <span class="ob-imperial-label">ft</span>
                <input type="number" class="ob-metric-input" id="heightIn" placeholder="7" min="0" max="11" oninput="validateMetric()" />
                <span class="ob-imperial-label">in</span>
            </div>
            <p class="ob-microcopy">This helps us estimate healthy ranges.</p>
            <button class="ob-cta" id="cta-4" onclick="goTo(5)" disabled>Continue</button>
        </div>

        <!-- ================================================
             SCREEN 5 ‚Äì Weight
             ================================================ -->
        <div class="ob-screen" id="screen-5">
            <p class="ob-step-label">Step 4 of 9</p>
            <h1 class="ob-headline">What's your current weight?</h1>
            <div class="ob-metric-row">
                <div class="ob-unit-toggle" id="weightUnitToggle">
                    <button class="ob-unit-btn active" data-unit="imperial" onclick="switchUnit('weight','imperial',this)">lb</button>
                    <button class="ob-unit-btn" data-unit="metric" onclick="switchUnit('weight','metric',this)">kg</button>
                </div>
            </div>
            <div id="weightMetric" class="ob-metric-row" style="display:none;">
                <input type="number" class="ob-metric-input" id="weightKg" placeholder="70" min="20" max="300" oninput="validateMetric()" />
                <span class="ob-imperial-label">kg</span>
            </div>
            <div id="weightImperial" class="ob-metric-row">
                <input type="number" class="ob-metric-input" id="weightLb" placeholder="155" min="44" max="660" oninput="validateMetric()" />
                <span class="ob-imperial-label">lb</span>
            </div>
            <p class="ob-microcopy" style="margin-top:var(--space-sm);">Used only to personalize recommendations. No judgments.</p>
            <button class="ob-cta" id="cta-5" onclick="goTo(6)">Continue</button>
            <p class="ob-microcopy"><button class="ob-skip-link" onclick="skipWeight()">Prefer not to say</button></p>
        </div>

        <!-- ================================================
             SCREEN 6 ‚Äì Activity Level
             ================================================ -->
        <div class="ob-screen" id="screen-6">
            <p class="ob-step-label">Step 5 of 9</p>
            <h1 class="ob-headline">How active are you<br>right now?</h1>
            <div class="ob-slider-wrap">
                <div class="ob-slider-labels">
                    <span>Very inactive</span>
                    <span>Lightly active</span>
                    <span>Moderately active</span>
                    <span>Very active</span>
                </div>
                <input type="range" class="ob-slider" id="activitySlider" min="0" max="3" step="1" value="1" oninput="updateActivity()" />
                <p class="ob-slider-current" id="activityLabel">Lightly active</p>
            </div>
            <p class="ob-microcopy">Think about the last 4 weeks.</p>
            <button class="ob-cta" onclick="goTo(7)">Continue</button>
        </div>

        <!-- ================================================
             SCREEN 7 ‚Äì Lifestyle Constraints
             ================================================ -->
        <div class="ob-screen" id="screen-7">
            <p class="ob-step-label">Step 6 of 9</p>
            <h1 class="ob-headline">Do any of these<br>apply to you?</h1>
            <div class="ob-multiselect-list" id="constraintList">
                <button class="ob-multi-card" data-value="limited-time" onclick="toggleMulti(this)">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">‚è±Ô∏è</span>
                    <span>Limited time</span>
                </button>
                <button class="ob-multi-card" data-value="low-energy" onclick="toggleMulti(this)">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">üò¥</span>
                    <span>Low energy / poor sleep</span>
                </button>
                <button class="ob-multi-card" data-value="past-injuries" onclick="toggleMulti(this)">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">ü©π</span>
                    <span>Past injuries</span>
                </button>
                <button class="ob-multi-card" data-value="high-stress" onclick="toggleMulti(this)">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">üßò</span>
                    <span>High stress</span>
                </button>
                <button class="ob-multi-card" data-value="none-constraints" onclick="toggleMultiNone(this, 'constraintList')">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">‚ú®</span>
                    <span>None of the above</span>
                </button>
            </div>
            <p class="ob-microcopy">This helps us keep your plan sustainable.</p>
            <button class="ob-cta" onclick="goTo(8)">Continue</button>
        </div>

        <!-- ================================================
             SCREEN 8 ‚Äì Health Considerations
             ================================================ -->
        <div class="ob-screen" id="screen-8">
            <p class="ob-step-label">Step 7 of 9</p>
            <h1 class="ob-headline">Any health considerations<br>we should be aware of?</h1>
            <div class="ob-multiselect-list" id="healthList">
                <button class="ob-multi-card" data-value="joint-pain" onclick="toggleMulti(this)">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">ü¶¥</span>
                    <span>Joint pain or injuries</span>
                </button>
                <button class="ob-multi-card" data-value="cardio-concerns" onclick="toggleMulti(this)">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">‚ù§Ô∏è</span>
                    <span>Cardiovascular concerns</span>
                </button>
                <button class="ob-multi-card" data-value="metabolic" onclick="toggleMulti(this)">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">üß¨</span>
                    <span>Metabolic conditions</span>
                </button>
                <button class="ob-multi-card" data-value="prefer-not-health" onclick="toggleMultiNone(this, 'healthList')">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">üîí</span>
                    <span>Prefer not to say</span>
                </button>
                <button class="ob-multi-card" data-value="none-health" onclick="toggleMultiNone(this, 'healthList')">
                    <span class="ob-multi-check"></span>
                    <span class="ob-multi-icon">‚ú®</span>
                    <span>None</span>
                </button>
            </div>
            <p class="ob-disclaimer">We don't provide medical diagnoses. This helps us avoid unsafe advice.</p>
            <button class="ob-cta" onclick="goTo(9)">Continue</button>
        </div>

        <!-- ================================================
             SCREEN 9 ‚Äì Motivation & Confidence
             ================================================ -->
        <div class="ob-screen" id="screen-9">
            <p class="ob-step-label">Step 8 of 9</p>
            <h1 class="ob-headline">How confident do you feel<br>about reaching your goal?</h1>
            <div class="ob-scale-row" id="confidenceRow">
                <button class="ob-scale-btn" data-value="not-confident" onclick="selectConfidence(this)">Not confident</button>
                <button class="ob-scale-btn" data-value="somewhat" onclick="selectConfidence(this)">Somewhat confident</button>
                <button class="ob-scale-btn" data-value="very" onclick="selectConfidence(this)">Very confident</button>
            </div>
            <!-- dynamic micro-affirmation -->
            <div class="ob-affirmation" id="affirmation" style="display:none;"></div>
            <button class="ob-cta" id="cta-9" onclick="goTo(10)" disabled>Continue</button>
        </div>

        <!-- ================================================
             SCREEN 10 ‚Äì Review & Confirm
             ================================================ -->
        <div class="ob-screen" id="screen-10">
            <p class="ob-step-label">Almost there</p>
            <h1 class="ob-headline">Here's what we<br>understand so far</h1>
            <div class="ob-review-grid" id="reviewGrid">
                <!-- populated by JS -->
            </div>
            <button class="ob-cta" onclick="goTo(11)">Create my plan</button>
            <button class="ob-cta-secondary" onclick="goTo(2)">Edit answers</button>
        </div>

        <!-- ================================================
             SCREEN 11 ‚Äì Analysis Transition
             ================================================ -->
        <div class="ob-screen" id="screen-11">
            <div class="ob-analysis-wrap">
                <!-- animated ring -->
                <div class="ob-analysis-ring">
                    <svg viewBox="0 0 80 80">
                        <defs>
                            <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="var(--sage-light)" />
                                <stop offset="100%" stop-color="var(--sage)" />
                            </linearGradient>
                        </defs>
                        <circle class="ob-ring-bg" cx="40" cy="40" r="30" />
                        <circle class="ob-ring-fill" cx="40" cy="40" r="30" />
                    </svg>
                </div>
                <h1 class="ob-headline">Analyzing your responses‚Ä¶</h1>
                <p class="ob-subtext">Building a plan tailored to your goals, body, and lifestyle.</p>
                <div class="ob-analysis-dots">
                    <div class="ob-analysis-dot"></div>
                    <div class="ob-analysis-dot"></div>
                    <div class="ob-analysis-dot"></div>
                </div>
            </div>
        </div>

    </div><!-- .onboarding-card -->
</div><!-- .onboarding-shell -->

<!-- ============================================================
     JAVASCRIPT ‚Äì full onboarding logic
     ============================================================ -->
<script>
    /* --------------------------------------------------------
       STATE
       -------------------------------------------------------- */
    const state = {
        goal: null,
        experience: null,
        height: null,          // stored as string for display
        heightUnit: 'imperial',
        weight: null,
        weightSkipped: false,
        weightUnit: 'imperial',
        activity: 1,           // slider index 0-3
        constraints: [],
        health: [],
        confidence: null
    };

    const ACTIVITY_LABELS = ['Very inactive','Lightly active','Moderately active','Very active'];

    const AFFIRMATIONS = {
        'not-confident':  "That's okay ‚Äì we'll meet you where you are.",
        'somewhat':       "A little doubt is normal. We'll build your confidence step by step.",
        'very':           "That's great! Let's channel that energy into your plan."
    };

    const GOAL_LABELS = {
        'lose-fat':      'Lose body fat',
        'build-muscle':  'Build muscle',
        'endurance':     'Improve endurance',
        'feel-healthier':'Feel healthier overall',
        'not-sure':      'Not sure yet'
    };

    const EXP_LABELS = {
        'beginner':     'Beginner',
        'intermediate': 'Intermediate',
        'advanced':     'Advanced'
    };

    /* --------------------------------------------------------
       NAVIGATION
       -------------------------------------------------------- */
    // Total "step" screens that contribute to progress (screens 2-10 = 9 steps)
    const TOTAL_STEPS = 9;

    function goTo(n) {
        // build review summary before showing screen 10
        if (n === 10) buildReview();
        // hide all
        document.querySelectorAll('.ob-screen').forEach(s => s.classList.remove('active'));
        // show target
        const target = document.getElementById('screen-' + n);
        if (target) target.classList.add('active');
        // update progress (screen 1 = 0%, screen 2 = 1/9, ‚Ä¶ screen 10 = 9/9)
        const pct = n <= 1 ? 0 : Math.min((n - 1) / TOTAL_STEPS * 100, 100);
        document.getElementById('progressFill').style.width = pct + '%';
        // special: if we land on screen 11, kick off analysis animation
        if (n === 11) {
            // re-trigger the ring animation by cloning
            const ring = target.querySelector('.ob-ring-fill');
            if (ring) {
                ring.style.animation = 'none';
                void ring.offsetWidth; // reflow
                ring.style.animation = '';
            }
        }
        // scroll card into view
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    /* --------------------------------------------------------
       SINGLE-SELECT OPTION CARDS
       -------------------------------------------------------- */
    function selectOption(el) {
        const group = el.dataset.group;
        // deselect siblings
        document.querySelectorAll('.ob-option-card[data-group="' + group + '"]')
            .forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        // update state
        state[group] = el.dataset.value;
        // enable CTA for current screen
        enableCurrentCTA();
    }

    function enableCurrentCTA() {
        // find the active screen and enable its CTA if selection exists
        const active = document.querySelector('.ob-screen.active');
        if (!active) return;
        const cta = active.querySelector('.ob-cta');
        if (!cta || !cta.hasAttribute('disabled')) return;
        // check if any option is selected in this screen
        const sel = active.querySelector('.ob-option-card.selected');
        if (sel) cta.removeAttribute('disabled');
    }

    /* --------------------------------------------------------
       MULTI-SELECT CARDS
       -------------------------------------------------------- */
    function toggleMulti(el) {
        el.classList.toggle('selected');
    }

    // "None of the above" / exclusive toggles
    function toggleMultiNone(el, listId) {
        const list = document.getElementById(listId);
        const wasSelected = el.classList.contains('selected');
        // deselect everything in list
        list.querySelectorAll('.ob-multi-card').forEach(c => c.classList.remove('selected'));
        // if it wasn't already on, turn it on (exclusive)
        if (!wasSelected) el.classList.add('selected');
    }

    /* --------------------------------------------------------
       HEIGHT ‚Äì unit toggle & validation
       -------------------------------------------------------- */
    function switchUnit(field, unit, btn) {
        // update toggle buttons
        const toggle = field === 'height' ? document.getElementById('heightUnitToggle') : document.getElementById('weightUnitToggle');
        toggle.querySelectorAll('.ob-unit-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        if (field === 'height') {
            state.heightUnit = unit;
            document.getElementById('heightMetric').style.display = unit === 'metric' ? 'flex' : 'none';
            document.getElementById('heightImperial').style.display = unit === 'imperial' ? 'flex' : 'none';
        } else {
            state.weightUnit = unit;
            document.getElementById('weightMetric').style.display = unit === 'metric' ? 'flex' : 'none';
            document.getElementById('weightImperial').style.display = unit === 'imperial' ? 'flex' : 'none';
        }
        validateMetric();
    }

    function validateMetric() {
        // Height
        const hCta = document.getElementById('cta-4');
        if (state.heightUnit === 'imperial') {
            const ft = document.getElementById('heightFt').value;
            const inch = document.getElementById('heightIn').value;
            state.height = (ft || inch) ? (ft || '0') + ' ft ' + (inch || '0') + ' in' : null;
        } else {
            const cm = document.getElementById('heightCm').value;
            state.height = cm ? cm + ' cm' : null;
        }
        if (hCta) {
            if (state.height) hCta.removeAttribute('disabled');
            else hCta.setAttribute('disabled', '');
        }

        // Weight
        const wCta = document.getElementById('cta-5');
        if (state.weightUnit === 'imperial') {
            const lb = document.getElementById('weightLb').value;
            state.weight = lb ? lb + ' lb' : null;
        } else {
            const kg = document.getElementById('weightKg').value;
            state.weight = kg ? kg + ' kg' : null;
        }
        // weight CTA always enabled (can skip)
    }

    function skipWeight() {
        state.weightSkipped = true;
        state.weight = null;
        goTo(6);
    }

    /* --------------------------------------------------------
       ACTIVITY SLIDER
       -------------------------------------------------------- */
    function updateActivity() {
        const val = parseInt(document.getElementById('activitySlider').value);
        state.activity = val;
        document.getElementById('activityLabel').textContent = ACTIVITY_LABELS[val];
    }

    /* --------------------------------------------------------
       CONFIDENCE SCALE
       -------------------------------------------------------- */
    function selectConfidence(el) {
        document.querySelectorAll('.ob-scale-btn').forEach(b => b.classList.remove('selected'));
        el.classList.add('selected');
        state.confidence = el.dataset.value;

        // show dynamic affirmation
        const aff = document.getElementById('affirmation');
        aff.style.display = 'block';
        aff.innerHTML = '<p>' + AFFIRMATIONS[state.confidence] + '</p>';

        // enable CTA
        document.getElementById('cta-9').removeAttribute('disabled');
    }

    /* --------------------------------------------------------
       REVIEW SCREEN ‚Äì build summary cards
       -------------------------------------------------------- */
    function buildReview() {
        const grid = document.getElementById('reviewGrid');
        grid.innerHTML = '';

        const items = [];

        // Goal
        if (state.goal)
            items.push({ icon: 'üéØ', key: 'Goal', value: GOAL_LABELS[state.goal] || state.goal });

        // Experience
        if (state.experience)
            items.push({ icon: 'üìä', key: 'Experience', value: EXP_LABELS[state.experience] || state.experience });

        // Height
        if (state.height)
            items.push({ icon: 'üìè', key: 'Height', value: state.height });

        // Weight
        if (state.weightSkipped)
            items.push({ icon: '‚öñÔ∏è', key: 'Weight', value: 'Not provided' });
        else if (state.weight)
            items.push({ icon: '‚öñÔ∏è', key: 'Weight', value: state.weight });

        // Activity
        items.push({ icon: 'üèÉ', key: 'Activity', value: ACTIVITY_LABELS[state.activity] });

        // Constraints
        const constraintCards = document.querySelectorAll('#constraintList .ob-multi-card.selected');
        if (constraintCards.length) {
            const labels = Array.from(constraintCards).map(c => c.querySelector('span:last-child').textContent.trim());
            items.push({ icon: '‚è±Ô∏è', key: 'Lifestyle', value: labels.join(', ') });
        }

        // Health
        const healthCards = document.querySelectorAll('#healthList .ob-multi-card.selected');
        if (healthCards.length) {
            const labels = Array.from(healthCards).map(c => c.querySelector('span:last-child').textContent.trim());
            items.push({ icon: '‚ù§Ô∏è', key: 'Health', value: labels.join(', ') });
        }

        // Confidence
        const confLabels = { 'not-confident':'Not confident', 'somewhat':'Somewhat confident', 'very':'Very confident' };
        if (state.confidence)
            items.push({ icon: 'üí¨', key: 'Confidence', value: confLabels[state.confidence] });

        items.forEach(item => {
            grid.innerHTML += `
                <div class="ob-review-item">
                    <div class="ob-review-left">
                        <span class="ob-review-icon">${item.icon}</span>
                        <span class="ob-review-key">${item.key}</span>
                    </div>
                    <span class="ob-review-value">${item.value}</span>
                </div>`;
        });
    }

    /* --------------------------------------------------------
       INIT ‚Äì set up imperial height as default visible
       -------------------------------------------------------- */
    document.getElementById('heightMetric').style.display = 'none';
    document.getElementById('heightImperial').style.display = 'flex';
    document.getElementById('weightMetric').style.display = 'none';
    document.getElementById('weightImperial').style.display = 'flex';
</script>
</body>
</html>