<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Benji – Onboarding</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,500&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body data-page="setup">

    <!-- keep this root (benji.js can still use it if needed) -->
    <div id="benji-root"></div>

    <!-- ============================================================
        BACKGROUND
        ============================================================ -->
    <div class="background-layers">
        <div class="grain"></div>
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- ============================================================
        ONBOARDING SHELL
        ============================================================ -->
    <div class="onboarding-shell">
        <div class="onboarding-card">
            <button class="ob-back" id="obBackBtn" type="button" onclick="goBack()" aria-label="Go back">
                <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
            </button>

            <div class="ob-progress-strip">
                <div class="ob-progress-fill" id="progressFill"></div>
            </div>

            <!-- ================================================
                SCREEN 1 – Welcome
                ================================================ -->
            <div class="ob-screen active" id="screen-1">
                <div class="ob-welcome-icon">
                    <img src="../assets/img/benji_logo.png" alt="Logo">
                </div>
                <h1 class="ob-headline">Let's personalize<br>your health plan</h1>
                <p class="ob-subtext">Answer a few quick questions so we can tailor guidance specifically for you. This takes about 2 minutes.</p>
                <button class="ob-cta" onclick="goTo(2)">Get started</button>
                <p class="ob-microcopy">You can update any answer later.</p>
            </div>

            <!-- ================================================
                SCREEN 2 – Primary Goal
                ================================================ -->
            <div class="ob-screen" id="screen-2">
                <p class="ob-step-label" id="stepLabel-2"></p>
                <h1 class="ob-headline">What's your main<br>goal right now?</h1>
                <div class="ob-option-list" id="goalList">
                    <button class="ob-option-card" data-group="goal" data-value="lose-fat" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-weight-scale" aria-hidden="true"></i></span>
                        <span class="ob-option-label">Lose body fat</span>
                        <span class="ob-option-check"></span>
                    </button>
                    <button class="ob-option-card" data-group="goal" data-value="build-muscle" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-dumbbell" aria-hidden="true"></i></span>
                        <span class="ob-option-label">Build muscle</span>
                        <span class="ob-option-check"></span>
                    </button>
                    <button class="ob-option-card" data-group="goal" data-value="endurance" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-person-running" aria-hidden="true"></i></span>
                        <span class="ob-option-label">Improve endurance</span>
                        <span class="ob-option-check"></span>
                    </button>
                    <button class="ob-option-card" data-group="goal" data-value="feel-healthier" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-heart" aria-hidden="true"></i></span>
                        <span class="ob-option-label">Feel healthier overall</span>
                        <span class="ob-option-check"></span>
                    </button>
                    <button class="ob-option-card" data-group="goal" data-value="not-sure" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-circle-question" aria-hidden="true"></i></span>
                        <span class="ob-option-label">Not sure yet</span>
                        <span class="ob-option-check"></span>
                    </button>
                </div>
                <p class="ob-microcopy">We'll adapt your plan based on this.</p>
                <button class="ob-cta" id="cta-2" onclick="handleContinue(3)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 3 – Mental Health Consent Gate
                ================================================ -->
            <div class="ob-screen" id="screen-3">
                <p class="ob-step-label" id="stepLabel-3"></p>
                <div class="ob-consent-icon"><i class="fa-solid fa-brain" aria-hidden="true"></i></div>
                <h1 class="ob-headline">Would you like to include<br>mental health details?</h1>
                <p class="ob-subtext">This helps us better support your overall wellbeing and adjust recommendations on tougher days.</p>
                <div class="ob-option-list" id="consentList">
                    <button class="ob-option-card" data-group="mentalConsent" data-value="yes" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-heart" aria-hidden="true"></i></span>
                        <span class="ob-option-label">
                            Yes, include it
                            <span class="ob-option-helper">We'll ask a few optional questions later in the flow</span>
                        </span>
                        <span class="ob-option-check"></span>
                    </button>
                    <button class="ob-option-card" data-group="mentalConsent" data-value="no" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-xmark" aria-hidden="true"></i></span>
                        <span class="ob-option-label">
                            No thanks
                            <span class="ob-option-helper">We won't ask about this again</span>
                        </span>
                        <span class="ob-option-check"></span>
                    </button>
                </div>
                <p class="ob-disclaimer">This is completely optional. Your answers stay private and are never shared.</p>
                <button class="ob-cta" id="cta-3" onclick="handleAdvanceFrom(3)" disabled>Continue</button>
            </div>

            <!-- ================================================
                SCREEN 4 – Experience Level
                ================================================ -->
            <div class="ob-screen" id="screen-4">
                <p class="ob-step-label" id="stepLabel-4"></p>
                <h1 class="ob-headline">How would you describe<br>your fitness experience?</h1>
                <div class="ob-option-list" id="expList">
                    <button class="ob-option-card" data-group="experience" data-value="beginner" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-seedling" aria-hidden="true"></i></span>
                        <span class="ob-option-label">
                            Beginner
                            <span class="ob-option-helper">Just getting started or returning after a long break</span>
                        </span>
                        <span class="ob-option-check"></span>
                    </button>
                    <button class="ob-option-card" data-group="experience" data-value="intermediate" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-bolt" aria-hidden="true"></i></span>
                        <span class="ob-option-label">
                            Intermediate
                            <span class="ob-option-helper">Exercise regularly and know the basics</span>
                        </span>
                        <span class="ob-option-check"></span>
                    </button>
                    <button class="ob-option-card" data-group="experience" data-value="advanced" onclick="selectOption(this)">
                        <span class="ob-option-icon"><i class="fa-solid fa-trophy" aria-hidden="true"></i></span>
                        <span class="ob-option-label">
                            Advanced
                            <span class="ob-option-helper">Structured training experience</span>
                        </span>
                        <span class="ob-option-check"></span>
                    </button>
                </div>
                <button class="ob-cta" id="cta-4" onclick="handleContinue(5)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 5 – Mental Health Detail (CONDITIONAL)
                Only shown if consent = yes
                ================================================ -->
            <div class="ob-screen" id="screen-5">
                <p class="ob-step-label" id="stepLabel-5"></p>
                <h1 class="ob-headline">How are you doing<br>emotionally?</h1>
                <p class="ob-subtext">Be as honest as you like. There are no wrong answers here.</p>

                <!-- Mood scale 1-5 -->
                <div class="ob-labeled-scale" id="moodScale">
                    <p class="ob-scale-question">How would you describe your mood lately?</p>
                    <div class="ob-scale-track">
                        <button class="ob-scale-pip" data-value="1" onclick="selectScale('mood',1,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Very low</span></button>
                        <button class="ob-scale-pip" data-value="2" onclick="selectScale('mood',2,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Low</span></button>
                        <button class="ob-scale-pip" data-value="3" onclick="selectScale('mood',3,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Neutral</span></button>
                        <button class="ob-scale-pip" data-value="4" onclick="selectScale('mood',4,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Good</span></button>
                        <button class="ob-scale-pip" data-value="5" onclick="selectScale('mood',5,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Great</span></button>
                    </div>
                </div>

                <!-- Stress level 1-5 -->
                <div class="ob-labeled-scale" id="stressScale">
                    <p class="ob-scale-question">What's your current stress level?</p>
                    <div class="ob-scale-track">
                        <button class="ob-scale-pip" data-value="1" onclick="selectScale('stress',1,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Very low</span></button>
                        <button class="ob-scale-pip" data-value="2" onclick="selectScale('stress',2,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Low</span></button>
                        <button class="ob-scale-pip" data-value="3" onclick="selectScale('stress',3,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Moderate</span></button>
                        <button class="ob-scale-pip" data-value="4" onclick="selectScale('stress',4,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">High</span></button>
                        <button class="ob-scale-pip" data-value="5" onclick="selectScale('stress',5,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Very high</span></button>
                    </div>
                </div>

                <!-- Optional reflection (collapsible) -->
                <div class="ob-collapsible">
                    <button class="ob-collapsible-trigger" onclick="toggleCollapsible(this)">
                        <span>Add a short reflection <span class="ob-collapsible-arrow">›</span></span>
                    </button>
                    <div class="ob-collapsible-body">
                        <textarea class="ob-reflection-input" id="mentalReflection" placeholder="A sentence or two about how you're feeling…" rows="3"></textarea>
                    </div>
                </div>

                <p class="ob-disclaimer">This information is used only to personalise your experience. We never diagnose.</p>
                <button class="ob-cta" id="cta-5" onclick="handleContinue(6)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 6 – Height
                ================================================ -->
            <div class="ob-screen" id="screen-6">
                <p class="ob-step-label" id="stepLabel-6"></p>
                <h1 class="ob-headline">What's your height?</h1>
                <div class="ob-metric-row">
                    <div class="ob-unit-toggle" id="heightUnitToggle">
                        <button class="ob-unit-btn active" data-unit="imperial" onclick="switchUnit('height','imperial',this)">ft &amp; in</button>
                        <button class="ob-unit-btn" data-unit="metric" onclick="switchUnit('height','metric',this)">cm</button>
                    </div>
                </div>
                <div id="heightMetric" class="ob-metric-row" style="display:none;">
                    <input type="number" class="ob-metric-input" id="heightCm" placeholder="170" min="60" max="280" oninput="validateMetric()" />
                    <span class="ob-imperial-label">cm</span>
                </div>
                <div id="heightImperial" class="ob-imperial-row" style="display:flex;">
                    <input type="number" class="ob-metric-input" id="heightFt" placeholder="5" min="1" max="8" oninput="validateMetric()" />
                    <span class="ob-imperial-label">ft</span>
                    <input type="number" class="ob-metric-input" id="heightIn" placeholder="7" min="0" max="11" oninput="validateMetric()" />
                    <span class="ob-imperial-label">in</span>
                </div>
                <p class="ob-microcopy">This helps us estimate healthy ranges.</p>
                <button class="ob-cta" id="cta-6" onclick="handleContinue(7)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 7 – Weight
                ================================================ -->
            <div class="ob-screen" id="screen-7">
                <p class="ob-step-label" id="stepLabel-7"></p>
                <h1 class="ob-headline">What's your current weight?</h1>
                <div class="ob-metric-row">
                    <div class="ob-unit-toggle" id="weightUnitToggle">
                        <button class="ob-unit-btn active" data-unit="imperial" onclick="switchUnit('weight','imperial',this)">lb</button>
                        <button class="ob-unit-btn" data-unit="metric" onclick="switchUnit('weight','metric',this)">kg</button>
                    </div>
                </div>
                <div id="weightMetric" class="ob-metric-row" style="display:none;">
                    <input type="number" class="ob-metric-input" id="weightKg" placeholder="70" min="20" max="300" oninput="validateMetric()" />
                    <span class="ob-imperial-label">kg</span>
                </div>
                <div id="weightImperial" class="ob-metric-row" style="display:flex;">
                    <input type="number" class="ob-metric-input" id="weightLb" placeholder="155" min="44" max="660" oninput="validateMetric()" />
                    <span class="ob-imperial-label">lb</span>
                </div>
                <p class="ob-microcopy">Used only to personalize recommendations. No judgments.</p>
                <button class="ob-cta" id="cta-7" onclick="handleContinue(8)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 8 – Activity & Wellness Scales
                ================================================ -->
            <div class="ob-screen" id="screen-8">
                <p class="ob-step-label" id="stepLabel-8"></p>
                <h1 class="ob-headline">How active and energised<br>are you right now?</h1>

                <!-- Activity slider -->
                <div class="ob-slider-wrap">
                    <p class="ob-scale-question">Physical activity level</p>
                    <div class="ob-slider-labels">
                        <span>Very inactive</span>
                        <span>Lightly active</span>
                        <span>Moderately active</span>
                        <span>Very active</span>
                    </div>
                    <input type="range" class="ob-slider" id="activitySlider" min="0" max="3" step="1" value="1" oninput="updateActivity()" />
                    <p class="ob-slider-current" id="activityLabel">Lightly active</p>
                </div>

                <!-- Energy level 1-5 -->
                <div class="ob-labeled-scale" id="energyScale">
                    <p class="ob-scale-question">How's your energy day-to-day?</p>
                    <div class="ob-scale-track">
                        <button class="ob-scale-pip" data-value="1" onclick="selectScale('energy',1,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Very low / rarely</span></button>
                        <button class="ob-scale-pip" data-value="2" onclick="selectScale('energy',2,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Low</span></button>
                        <button class="ob-scale-pip" data-value="3" onclick="selectScale('energy',3,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Moderate / inconsistent</span></button>
                        <button class="ob-scale-pip" data-value="4" onclick="selectScale('energy',4,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Good</span></button>
                        <button class="ob-scale-pip" data-value="5" onclick="selectScale('energy',5,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Very high / consistent</span></button>
                    </div>
                </div>

                <!-- Sleep quality 1-5 -->
                <div class="ob-labeled-scale" id="sleepScale">
                    <p class="ob-scale-question">How well have you been sleeping?</p>
                    <div class="ob-scale-track">
                        <button class="ob-scale-pip" data-value="1" onclick="selectScale('sleep',1,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Terrible</span></button>
                        <button class="ob-scale-pip" data-value="2" onclick="selectScale('sleep',2,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Poor</span></button>
                        <button class="ob-scale-pip" data-value="3" onclick="selectScale('sleep',3,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Okay</span></button>
                        <button class="ob-scale-pip" data-value="4" onclick="selectScale('sleep',4,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Good</span></button>
                        <button class="ob-scale-pip" data-value="5" onclick="selectScale('sleep',5,this)"><span class="ob-pip-dot"></span><span class="ob-pip-label">Great</span></button>
                    </div>
                </div>

                <p class="ob-microcopy">Think about the last 4 weeks.</p>
                <button class="ob-cta" onclick="handleContinue(9)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 9 – Lifestyle Constraints
                ================================================ -->
            <div class="ob-screen" id="screen-9">
                <p class="ob-step-label" id="stepLabel-9"></p>
                <h1 class="ob-headline">Do any of these<br>apply to you?</h1>
                <div class="ob-multiselect-list" id="constraintList">
                    <button class="ob-multi-card" data-value="limited-time" onclick="toggleMulti(this)">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-clock" aria-hidden="true"></i></span>
                        <span>Limited time</span>
                    </button>
                    <button class="ob-multi-card" data-value="low-energy" onclick="toggleMulti(this)">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-moon" aria-hidden="true"></i></span>
                        <span>Low energy / poor sleep</span>
                    </button>
                    <button class="ob-multi-card" data-value="past-injuries" onclick="toggleMulti(this)">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-bandage" aria-hidden="true"></i></span>
                        <span>Past injuries</span>
                    </button>
                    <button class="ob-multi-card" data-value="high-stress" onclick="toggleMulti(this)">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-face-tired" aria-hidden="true"></i></span>
                        <span>High stress</span>
                    </button>
                    <button class="ob-multi-card" data-value="none-constraints" onclick="toggleMultiNone(this, 'constraintList')">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-circle-check" aria-hidden="true"></i></span>
                        <span>None of the above</span>
                    </button>
                </div>
                <p class="ob-microcopy">This helps us keep your plan sustainable.</p>
                <button class="ob-cta" onclick="handleContinue(10)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 10 – Health Considerations
                ================================================ -->
            <div class="ob-screen" id="screen-10">
                <p class="ob-step-label" id="stepLabel-10"></p>
                <h1 class="ob-headline">Any health considerations<br>we should be aware of?</h1>
                <div class="ob-multiselect-list" id="healthList">
                    <button class="ob-multi-card" data-value="joint-pain" onclick="toggleMulti(this)">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-bone" aria-hidden="true"></i></span>
                        <span>Joint pain or injuries</span>
                    </button>
                    <button class="ob-multi-card" data-value="cardio-concerns" onclick="toggleMulti(this)">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-heart-pulse" aria-hidden="true"></i></span>
                        <span>Cardiovascular concerns</span>
                    </button>
                    <button class="ob-multi-card" data-value="metabolic" onclick="toggleMulti(this)">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-flask" aria-hidden="true"></i></span>
                        <span>Metabolic conditions</span>
                    </button>
                    <button class="ob-multi-card" data-value="prefer-not-health" onclick="toggleMultiNone(this, 'healthList')">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-eye-slash" aria-hidden="true"></i></span>
                        <span>Prefer not to say</span>
                    </button>
                    <button class="ob-multi-card" data-value="none-health" onclick="toggleMultiNone(this, 'healthList')">
                        <span class="ob-multi-check"></span>
                        <span class="ob-multi-icon"><i class="fa-solid fa-circle-check" aria-hidden="true"></i></span>
                        <span>None</span>
                    </button>
                </div>
                <p class="ob-disclaimer">We don't provide medical diagnoses. This helps us avoid unsafe advice.</p>
                <button class="ob-cta" onclick="handleContinue(11)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 11 – Motivation & Confidence
                ================================================ -->
            <div class="ob-screen" id="screen-11">
                <p class="ob-step-label" id="stepLabel-11"></p>
                <h1 class="ob-headline">How confident do you feel<br>about reaching your goal?</h1>
                <div class="ob-scale-row" id="confidenceRow">
                    <button class="ob-scale-btn" data-value="not-confident" onclick="selectConfidence(this)">Not confident</button>
                    <button class="ob-scale-btn" data-value="somewhat" onclick="selectConfidence(this)">Somewhat confident</button>
                    <button class="ob-scale-btn" data-value="very" onclick="selectConfidence(this)">Very confident</button>
                </div>
                <div class="ob-affirmation" id="affirmation" style="display:none;"></div>
                <button class="ob-cta" id="cta-11" onclick="handleContinue(12)">Continue</button>
            </div>

            <!-- ================================================
                SCREEN 12 – Review & Confirm
                ================================================ -->
            <div class="ob-screen" id="screen-12">
                <p class="ob-step-label">Almost there</p>
                <h1 class="ob-headline">Here's what we<br>understand so far</h1>
                <div class="ob-review-grid" id="reviewGrid"></div>
                <button class="ob-cta" onclick="goTo(13)">Create my plan</button>
                <button class="ob-cta-secondary" onclick="goToEdit(2)"><i class="fa-solid fa-pencil"></i> Edit</button>
            </div>

            <!-- ================================================
                SCREEN 13 – Analysis Transition
                ================================================ -->
            <div class="ob-screen" id="screen-13">
                <div class="ob-analysis-wrap">
                    <div class="ob-analysis-ring">
                        <svg viewBox="0 0 80 80">
                            <defs>
                                <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="var(--sage-light)" />
                                    <stop offset="100%" stop-color="var(--sage)" />
                                </linearGradient>
                            </defs>
                            <circle class="ob-ring-bg" cx="40" cy="40" r="30" />
                            <circle class="ob-ring-fill" cx="40" cy="40" r="30" />
                        </svg>
                    </div>
                    <h1 class="ob-headline">Analyzing your responses…</h1>
                    <p class="ob-subtext">Building a plan tailored to your goals, body, and lifestyle.</p>
                    <div class="ob-analysis-dots">
                        <div class="ob-analysis-dot"></div>
                        <div class="ob-analysis-dot"></div>
                        <div class="ob-analysis-dot"></div>
                    </div>
                </div>
            </div>

        </div><!-- .onboarding-card -->
    </div><!-- .onboarding-shell -->

    <!-- Scripts -->
    <script src="../js/setup.js"></script>
</body>
</html>
